{"version":3,"sources":["../src/config.js"],"names":["_","require","path","utils","shell","fs","ExtractTextPlugin","webpack","scrolex","webpackDevMiddleware","webpackHotMiddleware","BowerWebpackPlugin","SvgStoreWebpackPlugin","OptimizeCssAssetsPlugin","Visualizer","yaml","AssetsPlugin","WebpackMd5Hash","main","module","failure","process","argv","exit","runtime","lanyonDir","join","__dirname","lanyonEnv","env","LANYON_ENV","lanyonPackageFile","lanyonPackage","lanyonVersion","version","trace","LANYON_TRACE","publicPath","rubyProvidersOnly","LANYON_ONLY","rubyProvidersSkip","LANYON_SKIP","split","lanyonUpdateGemLockfile","LANYON_UPDATE_GEM_LOCKFILE","lanyonReset","LANYON_RESET","onTravis","TRAVIS","ghPagesEnv","GHPAGES_URL","GHPAGES_BOTNAME","GHPAGES_BOTEMAIL","isDev","isHotLoading","indexOf","projectDir","LANYON_PROJECT","PWD","cwd","npmRoot","upwardDirContaining","components","gitRoot","projectPackageFile","projectPackage","e","gems","defaults","get","lanyon","realpathSync","cacheDir","binDir","recordsPath","assetsSourceDir","assetsBuildDir","contentBuildDir","contentScandir","contentIgnore","jekyllConfig","jekyllConfigPath","buf","readFileSync","safeLoad","themeDir","theme","cmd","z","exec","stdout","allApps","forEach","app","push","getFilename","extension","isChunk","isContent","filename","cfg","entry","entries","unshift","common","node","target","output","chunkFilename","cssFilename","devtool","bail","loaders","plugins","test","loader","query","babelrc","presets","resolve","sourceRoot","cacheDirectory","exclude","extract","ProvidePlugin","$","jQuery","svgoOptions","removeTitle","prefix","HotModuleReplacementPlugin","allChunks","optimize","UglifyJsPlugin","compress","warnings","mangle","sourceMap","OccurrenceOrderPlugin","DedupePlugin","LimitChunkCountPlugin","maxChunks","MinChunkSizePlugin","minChunkSize","ReportErrors","plugin","compilation","asset","assets","stick","errors","length","CommonsChunkPlugin","statistics","processOutput","safeDump","lanyon_assets","OccurenceOrderPlugin","resolveLoader","root","debug","bundler","browsersync","server","port","ports","content","baseDir","middleware","middlewares","hot","inline","stats","colors","watchOptions","ignoreInitial","ignored","reloadDelay","files","jekyll","nodemon","onChangeOnly","verbose","watch","ignore","concat","ext","exports"],"mappings":"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","file":"config.js","sourcesContent":["const _                       = require('lodash')\nconst path                    = require('path')\nconst utils                   = require('./utils')\nconst shell                   = require('shelljs')\nconst fs                      = require('fs')\nconst ExtractTextPlugin       = require('extract-text-webpack-plugin')\nconst webpack                 = require('webpack')\nconst scrolex                 = require('scrolex')\nconst webpackDevMiddleware    = require('webpack-dev-middleware')\nconst webpackHotMiddleware    = require('webpack-hot-middleware')\nconst BowerWebpackPlugin      = require('bower-webpack-plugin')\nconst SvgStoreWebpackPlugin   = require('webpack-svgstore-plugin')\nconst OptimizeCssAssetsPlugin = require('optimize-css-assets-webpack-plugin')\nconst Visualizer              = require('webpack-visualizer-plugin')\nconst yaml                    = require('js-yaml')\nconst AssetsPlugin            = require('assets-webpack-plugin')\nconst WebpackMd5Hash          = require('webpack-md5-hash')\n\nif (require.main === module) {\n  scrolex.failure(`Please only used this module via require, or: src/cli.js ${process.argv[1]}`)\n  process.exit(1)\n}\n\nlet runtime = {}\n\nruntime.lanyonDir         = path.join(__dirname, '..')\nruntime.lanyonEnv         = process.env.LANYON_ENV || 'development'\nruntime.lanyonPackageFile = path.join(runtime.lanyonDir, 'package.json')\nconst lanyonPackage       = require(runtime.lanyonPackageFile)\nruntime.lanyonVersion     = lanyonPackage.version\n\nruntime.trace      = process.env.LANYON_TRACE === '1'\nruntime.publicPath = '/assets/build/'\n\nruntime.rubyProvidersOnly = (process.env.LANYON_ONLY || '')\nruntime.rubyProvidersSkip = (process.env.LANYON_SKIP || '').split(/\\s+/)\n\nruntime.lanyonUpdateGemLockfile = process.env.LANYON_UPDATE_GEM_LOCKFILE === '1'\nruntime.lanyonReset             = process.env.LANYON_RESET               === '1'\nruntime.onTravis                = process.env.TRAVIS                     === 'true'\nruntime.ghPagesEnv              = {\n  GHPAGES_URL     : process.env.GHPAGES_URL,\n  GHPAGES_BOTNAME : process.env.GHPAGES_BOTNAME,\n  GHPAGES_BOTEMAIL: process.env.GHPAGES_BOTEMAIL,\n}\nruntime.isDev        = runtime.lanyonEnv === 'development'\nruntime.isHotLoading = runtime.isDev && ['serve', 'start'].indexOf(process.argv[2]) !== -1\n\nruntime.projectDir = process.env.LANYON_PROJECT || process.env.PWD || process.cwd() // <-- symlinked npm will mess up process.cwd() and point to ~/code/lanyon\n\nruntime.npmRoot = utils.upwardDirContaining('package.json', runtime.projectDir, 'lanyon')\nif (!runtime.npmRoot) {\n  scrolex.failure(`Unable to determine non-lanyon npmRoot, falling back to ${runtime.projectDir}`, { components: 'lanyon>config' })\n  runtime.npmRoot = runtime.projectDir\n}\nruntime.gitRoot = utils.upwardDirContaining('.git', runtime.npmRoot)\n\nruntime.projectPackageFile = path.join(runtime.npmRoot, 'package.json')\ntry {\n  var projectPackage = require(runtime.projectPackageFile)\n} catch (e) {\n  projectPackage = {}\n}\n\nruntime.gems = _.defaults(_.get(projectPackage, 'lanyon.gems') || {}, _.get(lanyonPackage, 'lanyon.gems'))\nruntime      = _.defaults(projectPackage.lanyon || {}, lanyonPackage.lanyon, runtime)\n\ntry {\n  runtime.projectDir = fs.realpathSync(runtime.projectDir)\n} catch (e) {\n  runtime.projectDir = fs.realpathSync(`${runtime.gitRoot}/${runtime.projectDir}`)\n}\n\nruntime.cacheDir        = path.join(runtime.projectDir, '.lanyon')\nruntime.binDir          = path.join(runtime.cacheDir, 'bin')\nruntime.recordsPath     = path.join(runtime.cacheDir, 'records.json')\nruntime.assetsSourceDir = path.join(runtime.projectDir, 'assets')\nruntime.assetsBuildDir  = path.join(runtime.assetsSourceDir, 'build')\nruntime.contentBuildDir = path.join(runtime.projectDir, '_site')\nruntime.contentScandir  = path.join(runtime.projectDir, runtime.contentScandir || '.')\nruntime.contentIgnore   = runtime.contentIgnore || []\n\n// Load project's jekyll _config.yml\nruntime.jekyllConfig   = {}\nconst jekyllConfigPath = path.join(runtime.projectDir, '_config.yml')\ntry {\n  const buf            = fs.readFileSync(jekyllConfigPath)\n  runtime.jekyllConfig = yaml.safeLoad(buf)\n} catch (e) {\n  scrolex.failure(`Unable to load ${jekyllConfigPath}`, { components: 'lanyon>config' })\n}\n\nruntime.themeDir = false\nif (runtime.jekyllConfig.theme) {\n  const cmd = `${path.join(runtime.binDir, 'bundler')} show ${runtime.jekyllConfig.theme}`\n  const z   = shell.exec(cmd).stdout\n  if (!z) {\n    scrolex.failure(`Unable find defined them \"${runtime.jekyllConfig.theme}\" via cmd: \"${cmd}\"`, { components: 'lanyon>config' })\n  } else {\n    runtime.themeDir = z\n  }\n}\n\n// Determine rubyProvider sources to traverse\nconst allApps = [ 'system', 'docker', 'rbenv', 'rvm', 'ruby-shim' ]\nif (runtime.rubyProvidersOnly === 'auto-all') {\n  runtime.rubyProvidersOnly = ''\n}\n\nif (runtime.rubyProvidersOnly) {\n  runtime.rubyProvidersSkip = []\n  allApps.forEach(app => {\n    if (app !== runtime.rubyProvidersOnly) {\n      runtime.rubyProvidersSkip.push(app)\n    }\n  })\n}\n\nfunction getFilename (extension, isChunk, isContent) {\n  let filename = `[name].${extension}`\n\n  if (!runtime.isDev) {\n    filename = `[name].[chunkhash].${extension}`\n    if (isContent) {\n      filename = `[name].[contenthash].${extension}`\n    }\n  }\n\n  if (isChunk) {\n    filename = `[name].[chunkhash].[id].chunk.${extension}`\n  }\n\n  return filename\n}\n\nconst cfg = {\n  webpack: {\n    entry: (function entries () {\n      var entries = {}\n      runtime.entries.forEach(entry => {\n        entries[entry] = [ path.join(runtime.assetsSourceDir, `${entry}.js`) ]\n\n        if (entry === 'app' && runtime.isDev) {\n          entries[entry].unshift('webpack-hot-middleware/client')\n        }\n      })\n\n      if (runtime.common) {\n        // e.g.: [ \"jquery\" ]\n        // https://webpack.github.io/docs/code-splitting.html#split-app-and-vendor-code\n        entries.common = runtime.common\n      }\n\n      return entries\n    }()),\n    node: {\n      fs: 'empty',\n    },\n    target: 'web',\n    output: {\n      publicPath   : runtime.publicPath,\n      path         : runtime.assetsBuildDir,\n      filename     : getFilename('js'),\n      chunkFilename: getFilename('js', true),\n      cssFilename  : getFilename('css'),\n    },\n    devtool: 'eval-cheap-source-map',\n    // devtool: 'source-map',\n    bail   : false, // <-- We use our own ReportErrors plugin as with bail errors details are lost. e.g.: `Error at NormalModule.onModuleBuildFailed`\n    module : {\n      loaders: (function plugins () {\n        const loaders = [\n          {\n            test  : /\\.woff(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=application/font-woff',\n          }, {\n            test  : /\\.woff2(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=application/font-woff',\n          }, {\n            test  : /\\.ttf(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=application/octet-stream',\n          }, {\n            test  : /\\.eot(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'file',\n          }, {\n            test  : /\\.cur(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'file',\n          }, {\n            test  : /\\.svg(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=image/svg+xml',\n          },\n          {\n            test  : /\\.coffee$/,\n            loader: 'coffee',\n          },\n          {\n            test  : /\\.(png|gif|jpe?g)$/,\n            loader: 'url?limit=8096',\n          },\n          {\n            // https://github.com/webpack/webpack/issues/512\n            test  : /[\\\\/](bower_components)[\\\\/]modernizr[\\\\/]modernizr\\.js$/,\n            loader: 'imports?this=>window!exports?window.Modernizr',\n          },\n          {\n            test  : /[\\\\/](bower_components)[\\\\/]svgeezy[\\\\/]svgeezy\\.js$/,\n            loader: 'imports?this=>window!exports?svgeezy',\n          },\n          {\n            // https://www.techchorus.net/blog/using-sass-version-of-bootstrap-with-webpack/\n            test  : /[\\\\/](bower_components)[\\\\/]bootstrap-sass[\\\\/]assets[\\\\/]javascripts[\\\\/]/,\n            loader: 'imports?jQuery=jquery,$=jquery,this=>window',\n          },\n          {\n            test  : /[\\\\/]jquery\\..*\\.js$/,\n            loader: 'imports?jQuery=jquery,$=jquery,this=>window',\n          },\n        ]\n\n        if (runtime.isDev) {\n          loaders.push({\n            test  : /\\.css$/,\n            loader: `style!css?sourceMap!resolve-url?root=${runtime.projectDir}`,\n          })\n          loaders.push({\n            test  : /\\.scss$/,\n            loader: `style!css?sourceMap!sass?sourceMap!resolve-url?root=${runtime.projectDir}`,\n          })\n          loaders.push({\n            test  : /\\.less$/,\n            // @todo Had to disable resolve-url-loader for less as less currently produces invalid css (in its eyes)\n            // see: https://travis-ci.org/tus/tus.io/builds/183913229#L1206\n            loader: 'style!css?sourceMap!less?sourceMap',\n          })\n          loaders.push({\n            test  : /\\.(js|jsx)$/,\n            loader: 'babel',\n            query : {\n              babelrc: false,\n              // If we ever want multiple loaders on this test: https://github.com/babel/babel-loader/issues/166#issuecomment-170054444\n              presets: [\n                require.resolve('babel-preset-es2015'),\n                require.resolve('babel-preset-react'),\n                require.resolve('babel-preset-stage-0'),\n              ],\n              sourceRoot    : `${runtime.projectDir}`,\n              cacheDirectory: `${runtime.cacheDir}/babelCache`,\n            },\n            exclude: /[\\\\/](node_modules|bower_components|js-untouched)[\\\\/]/,\n          })\n        } else {\n          loaders.push({\n            test  : /\\.css$/,\n            loader: ExtractTextPlugin.extract(`css?sourceMap!resolve-url?root=${runtime.projectDir}`),\n          })\n          loaders.push({\n            test  : /\\.scss$/,\n            loader: ExtractTextPlugin.extract(`css?sourceMap!sass?sourceMap!resolve-url?root=${runtime.projectDir}`),\n          })\n          loaders.push({\n            test  : /\\.less$/,\n            // @todo Had to disable resolve-url-loader for less as less currently produces invalid css (in its eyes)\n            // see: https://travis-ci.org/tus/tus.io/builds/183913229#L1206\n            loader: ExtractTextPlugin.extract('css?sourceMap!less?sourceMap'),\n          })\n          loaders.push({\n            test  : /\\.(js|jsx)$/,\n            loader: 'babel',\n            query : {\n              babelrc: false,\n              // If we ever want multiple loaders on this test: https://github.com/babel/babel-loader/issues/166#issuecomment-170054444\n              presets: [\n                require.resolve('babel-preset-es2015'),\n                require.resolve('babel-preset-react'),\n                require.resolve('babel-preset-stage-0'),\n              ],\n              sourceRoot    : `${runtime.projectDir}`,\n              cacheDirectory: `${runtime.cacheDir}/babelCache`,\n            },\n            exclude: /[\\\\/](node_modules|bower_components|js-untouched)[\\\\/]/,\n          })\n        }\n\n        return loaders\n      }()),\n    },\n    plugins: (function plugins () {\n      var plugins = [\n        new BowerWebpackPlugin(),\n        new webpack.ProvidePlugin({\n          _     : 'lodash',\n          $     : 'jquery',\n          jQuery: 'jquery',\n        }),\n        new SvgStoreWebpackPlugin({\n          svgoOptions: {\n            plugins: [\n             { removeTitle: true },\n            ],\n          },\n          prefix: 'icon-',\n        }),\n      ]\n\n      if (runtime.isDev) {\n        plugins.push(new webpack.HotModuleReplacementPlugin())\n      } else {\n        plugins.push(new ExtractTextPlugin(getFilename('css'), {\n          allChunks: true,\n        }))\n        plugins.push(new webpack.optimize.UglifyJsPlugin({\n          compress: {\n            warnings: true,\n          },\n          mangle   : true,\n          sourceMap: true,\n          exclude  : /[\\\\/](node_modules|bower_components|js-untouched)[\\\\/]/,\n        }))\n\n        // plugins.push(new webpack.NoErrorsPlugin())\n        plugins.push(new OptimizeCssAssetsPlugin())\n        plugins.push(new webpack.optimize.OccurrenceOrderPlugin())\n        plugins.push(new webpack.optimize.DedupePlugin())\n        plugins.push(new webpack.optimize.LimitChunkCountPlugin({maxChunks: 15}))\n        plugins.push(new webpack.optimize.MinChunkSizePlugin({minChunkSize: 10000}))\n        plugins.push(function ReportErrors () {\n          this.plugin('done', ({compilation}) => {\n            for (const asset in compilation.assets) {\n              scrolex.stick(`Wrote ${runtime.assetsBuildDir}/${asset}`, { components: 'lanyon>config' })\n            }\n            if (compilation.errors && compilation.errors.length) {\n              scrolex.failure(compilation.errors, { components: 'lanyon>config' })\n              if (!runtime.isDev) {\n                process.exit(1)\n              }\n            }\n          })\n        })\n      }\n\n      if (runtime.common) {\n        plugins.push(new webpack.optimize.CommonsChunkPlugin(/* chunkName= */'common', /* filename= */getFilename('js')))\n      }\n\n      if (!runtime.isDev && runtime.statistics) {\n        // @todo: Once Vizualizer supports multiple entries, add support for that here\n        // https://github.com/chrisbateman/webpack-visualizer/issues/5\n        // Currently it just shows stats for all entries in one graph\n        plugins.push(new Visualizer({\n          filename: runtime.statistics,\n        }))\n      }\n\n      plugins.push(new AssetsPlugin({\n        filename: 'jekyll.lanyon_assets.yml',\n        path    : runtime.cacheDir,\n        processOutput (assets) {\n          scrolex.stick(`Writing asset manifest to: \"${runtime.cacheDir}/jekyll.lanyon_assets.yml\"`, { components: 'lanyon>config' })\n          return yaml.safeDump({lanyon_assets: assets})\n        },\n      }))\n      plugins.push(new WebpackMd5Hash())\n      plugins.push(new webpack.optimize.OccurenceOrderPlugin())\n\n      return plugins\n    }()),\n    resolveLoader: {\n      root: [\n        path.join(runtime.lanyonDir, 'node_modules'),\n        path.join(runtime.projectDir, 'node_modules'),\n      ],\n    },\n    recordsPath: runtime.recordsPath,\n    resolve    : {\n      root: [\n        path.resolve(runtime.assetsSourceDir),\n        `${path.resolve(runtime.assetsSourceDir)}/bower_components`,\n        `${path.resolve(runtime.projectDir)}/node_modules`,\n        `${path.resolve(runtime.lanyonDir)}/node_modules`,\n      ],\n    },\n    debug: runtime.isDev,\n  },\n}\n\nif (runtime.isHotLoading) {\n  var bundler = webpack(cfg.webpack)\n}\n\ncfg.browsersync = {\n  server: {\n    port      : runtime.ports.content,\n    baseDir   : runtime.contentBuildDir,\n    middleware: (function middlewares () {\n      var middlewares = []\n\n      if (runtime.isHotLoading) {\n        middlewares.push(webpackDevMiddleware(bundler, {\n          publicPath: runtime.publicPath,\n          hot       : true,\n          inline    : true,\n          stats     : { colors: true },\n        }))\n        middlewares.push(webpackHotMiddleware(bundler))\n      }\n\n      if (!middlewares.length) {\n        return false\n      }\n\n      return middlewares\n    }()),\n    // serveStatic: runtime.themeDir\n  },\n  watchOptions: {\n    ignoreInitial: true,\n    ignored      : [\n      // no need to watch '*.js' here, webpack will take care of it for us,\n      // including full page reloads if HMR won't work\n      '*.js',\n      '.git',\n      'assets/build',\n      '.lanyon',\n    ],\n  },\n  reloadDelay: 200,\n  files      : runtime.contentBuildDir,\n}\n\ncfg.jekyll = {\n  exclude: [\n    'node_modules',\n    'env.sh',\n    'env.*.sh',\n    '.env.sh',\n    '.env.*.sh',\n    '.lanyon',\n  ],\n}\n\ncfg.nodemon = {\n  onChangeOnly: true,\n  verbose     : true,\n  watch       : runtime.contentScandir,\n  ignore      : [\n    '_site/**',\n    '.env.*.sh',\n    '.env.sh',\n    '.lanyon/**',\n    'assets/**',\n    'env.*.sh',\n    'env.sh',\n    'node_modules/**',\n    'vendor/**',\n  ].concat(runtime.contentIgnore),\n  ext: [\n    'htm',\n    'html',\n    'jpg',\n    'json',\n    'md',\n    'png',\n    'sh',\n    'yml',\n  ].join(','),\n}\n\ncfg.runtime = runtime\n\nmodule.exports = cfg\n"]}