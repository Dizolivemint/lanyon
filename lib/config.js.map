{"version":3,"sources":["../src/config.js"],"names":["_","require","path","utils","shell","fs","ExtractTextPlugin","webpack","webpackDevMiddleware","webpackHotMiddleware","BowerWebpackPlugin","SvgStoreWebpackPlugin","OptimizeCssAssetsPlugin","Visualizer","yaml","AssetsPlugin","WebpackMd5Hash","runtime","lanyonDir","join","__dirname","lanyonEnv","process","env","LANYON_ENV","lanyonPackageFile","lanyonPackage","lanyonVersion","version","trace","LANYON_TRACE","publicPath","rubyProvidersOnly","LANYON_ONLY","rubyProvidersSkip","LANYON_SKIP","split","lanyonReset","LANYON_RESET","onTravis","TRAVIS","ghPagesEnv","GHPAGES_URL","GHPAGES_BOTNAME","GHPAGES_BOTEMAIL","isDev","isHotLoading","indexOf","argv","projectDir","LANYON_PROJECT","PWD","cwd","npmRoot","upwardDirContaining","console","error","gitRoot","projectPackageFile","projectPackage","e","gems","defaults","get","lanyon","realpathSync","cacheDir","binDir","recordsPath","assetsSourceDir","assetsBuildDir","contentBuildDir","contentScandir","contentIgnore","jekyllConfig","jekyllConfigPath","buf","readFileSync","safeLoad","themeDir","theme","cmd","z","exec","stdout","name","prerequisites","exeSuffix","exe","versionCheck","allApps","forEach","app","push","getFilename","extension","isChunk","isContent","filename","cfg","entry","entries","unshift","common","node","target","output","chunkFilename","cssFilename","devtool","bail","module","loaders","plugins","test","loader","query","babelrc","presets","resolve","sourceRoot","cacheDirectory","exclude","extract","ProvidePlugin","$","jQuery","svgoOptions","removeTitle","prefix","HotModuleReplacementPlugin","allChunks","optimize","UglifyJsPlugin","compress","warnings","mangle","sourceMap","OccurrenceOrderPlugin","DedupePlugin","LimitChunkCountPlugin","maxChunks","MinChunkSizePlugin","minChunkSize","ReportErrors","plugin","compilation","asset","assets","log","errors","length","exit","CommonsChunkPlugin","statistics","fullpathStatistics","processOutput","safeDump","lanyon_assets","OccurenceOrderPlugin","resolveLoader","root","debug","bundler","browsersync","server","port","ports","content","baseDir","middleware","middlewares","hot","inline","stats","colors","watchOptions","ignoreInitial","ignored","reloadDelay","files","jekyll","nodemon","onChangeOnly","verbose","watch","ignore","concat","ext","exports"],"mappings":"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","file":"config.js","sourcesContent":["const _                       = require('lodash')\nconst path                    = require('path')\nconst utils                   = require('./utils')\nconst shell                   = require('shelljs')\nconst fs                      = require('fs')\nconst ExtractTextPlugin       = require('extract-text-webpack-plugin')\nconst webpack                 = require('webpack')\nconst webpackDevMiddleware    = require('webpack-dev-middleware')\nconst webpackHotMiddleware    = require('webpack-hot-middleware')\nconst BowerWebpackPlugin      = require('bower-webpack-plugin')\nconst SvgStoreWebpackPlugin   = require('webpack-svgstore-plugin')\nconst OptimizeCssAssetsPlugin = require('optimize-css-assets-webpack-plugin')\nconst Visualizer              = require('webpack-visualizer-plugin')\nconst yaml                    = require('js-yaml')\nconst AssetsPlugin            = require('assets-webpack-plugin')\nconst WebpackMd5Hash          = require('webpack-md5-hash')\n\nlet runtime = {}\n\nruntime.lanyonDir         = path.join(__dirname, '..')\nruntime.lanyonEnv         = process.env.LANYON_ENV || 'development'\nruntime.lanyonPackageFile = path.join(runtime.lanyonDir, 'package.json')\nconst lanyonPackage       = require(runtime.lanyonPackageFile)\nruntime.lanyonVersion     = lanyonPackage.version\n\nruntime.trace      = process.env.LANYON_TRACE === '1'\nruntime.publicPath = '/assets/build/'\n\nruntime.rubyProvidersOnly = (process.env.LANYON_ONLY || '')\nruntime.rubyProvidersSkip = (process.env.LANYON_SKIP || '').split(/\\s+/)\n\nruntime.lanyonReset     = process.env.LANYON_RESET     === '1'\nruntime.onTravis        = process.env.TRAVIS           === 'true'\nruntime.ghPagesEnv      = {\n  GHPAGES_URL     : process.env.GHPAGES_URL,\n  GHPAGES_BOTNAME : process.env.GHPAGES_BOTNAME,\n  GHPAGES_BOTEMAIL: process.env.GHPAGES_BOTEMAIL,\n}\nruntime.isDev        = runtime.lanyonEnv === 'development'\nruntime.isHotLoading = runtime.isDev && ['serve', 'start'].indexOf(process.argv[2]) !== -1\n\nruntime.projectDir = process.env.LANYON_PROJECT || process.env.PWD || process.cwd() // <-- symlinked npm will mess up process.cwd() and point to ~/code/lanyon\n\nruntime.npmRoot = utils.upwardDirContaining('package.json', runtime.projectDir, 'lanyon')\nif (!runtime.npmRoot) {\n  console.error(`--> Unable to determine non-lanyon npmRoot, falling back to ${runtime.projectDir}`)\n  runtime.npmRoot = runtime.projectDir\n}\nruntime.gitRoot = utils.upwardDirContaining('.git', runtime.npmRoot)\n\nruntime.projectPackageFile = path.join(runtime.npmRoot, 'package.json')\ntry {\n  var projectPackage = require(runtime.projectPackageFile)\n} catch (e) {\n  projectPackage = {}\n}\n\nruntime.gems = _.defaults(_.get(projectPackage, 'lanyon.gems') || {}, _.get(lanyonPackage, 'lanyon.gems'))\nruntime      = _.defaults(projectPackage.lanyon || {}, lanyonPackage.lanyon, runtime)\n\ntry {\n  runtime.projectDir = fs.realpathSync(runtime.projectDir)\n} catch (e) {\n  runtime.projectDir = fs.realpathSync(`${runtime.gitRoot}/${runtime.projectDir}`)\n}\n\nruntime.cacheDir        = path.join(runtime.projectDir, '.lanyon')\nruntime.binDir          = path.join(runtime.cacheDir, 'bin')\nruntime.recordsPath     = path.join(runtime.cacheDir, 'records.json')\nruntime.assetsSourceDir = path.join(runtime.projectDir, 'assets')\nruntime.assetsBuildDir  = path.join(runtime.assetsSourceDir, 'build')\nruntime.contentBuildDir = path.join(runtime.projectDir, '_site')\nruntime.contentScandir  = path.join(runtime.projectDir, runtime.contentScandir || '.')\nruntime.contentIgnore   = runtime.contentIgnore || []\n\n// Load project's jekyll _config.yml\nruntime.jekyllConfig   = {}\nconst jekyllConfigPath = path.join(runtime.projectDir, '_config.yml')\ntry {\n  const buf            = fs.readFileSync(jekyllConfigPath)\n  runtime.jekyllConfig = yaml.safeLoad(buf)\n} catch (e) {\n  console.error(`Unable to load ${jekyllConfigPath}`)\n}\n\nruntime.themeDir = false\nif (runtime.jekyllConfig.theme) {\n  const cmd = `${path.join(runtime.binDir, 'bundler')} show ${runtime.jekyllConfig.theme}`\n  const z   = shell.exec(cmd).stdout\n  if (!z) {\n    console.error(`Unable find defined them \"${runtime.jekyllConfig.theme}\" via cmd: \"${cmd}\"`)\n  } else {\n    runtime.themeDir = z\n  }\n}\n\n// Set prerequisite defaults\nfor (const name in runtime.prerequisites) {\n  if (!runtime.prerequisites[name].exeSuffix) {\n    runtime.prerequisites[name].exeSuffix = ''\n  }\n  if (!runtime.prerequisites[name].exe) {\n    runtime.prerequisites[name].exe = name\n  }\n  if (!runtime.prerequisites[name].versionCheck) {\n    runtime.prerequisites[name].versionCheck = `${runtime.prerequisites[name].exe} -v`\n  }\n}\n\n// Determine rubyProvider sources to traverse\nconst allApps = [ 'system', 'docker', 'rbenv', 'rvm', 'ruby-shim' ]\nif (runtime.rubyProvidersOnly === 'auto-all') {\n  runtime.rubyProvidersOnly = ''\n}\n\nif (runtime.rubyProvidersOnly) {\n  runtime.rubyProvidersSkip = []\n  allApps.forEach(app => {\n    if (app !== runtime.rubyProvidersOnly) {\n      runtime.rubyProvidersSkip.push(app)\n    }\n  })\n}\n\nfunction getFilename (extension, isChunk, isContent) {\n  let filename = `[name].${extension}`\n\n  if (!runtime.isDev) {\n    filename = `[name].[chunkhash].${extension}`\n    if (isContent) {\n      filename = `[name].[contenthash].${extension}`\n    }\n  }\n\n  if (isChunk) {\n    filename = `[name].[chunkhash].[id].chunk.${extension}`\n  }\n\n  return filename\n}\n\nconst cfg = {\n  webpack: {\n    entry: (function entries () {\n      var entries = {}\n      runtime.entries.forEach(entry => {\n        entries[entry] = [ path.join(runtime.assetsSourceDir, `${entry}.js`) ]\n\n        if (entry === 'app' && runtime.isDev) {\n          entries[entry].unshift('webpack-hot-middleware/client')\n        }\n      })\n\n      if (runtime.common) {\n        // e.g.: [ \"jquery\" ]\n        // https://webpack.github.io/docs/code-splitting.html#split-app-and-vendor-code\n        entries.common = runtime.common\n      }\n\n      return entries\n    }()),\n    node: {\n      fs: 'empty',\n    },\n    target: 'web',\n    output: {\n      publicPath   : runtime.publicPath,\n      path         : runtime.assetsBuildDir,\n      filename     : getFilename('js'),\n      chunkFilename: getFilename('js', true),\n      cssFilename  : getFilename('css'),\n    },\n    devtool: 'eval-cheap-source-map',\n    // devtool: 'source-map',\n    bail   : false, // <-- We use our own ReportErrors plugin as with bail errors details are lost. e.g.: `Error at NormalModule.onModuleBuildFailed`\n    module : {\n      loaders: (function plugins () {\n        const loaders = [\n          {\n            test  : /\\.woff(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=application/font-woff',\n          }, {\n            test  : /\\.woff2(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=application/font-woff',\n          }, {\n            test  : /\\.ttf(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=application/octet-stream',\n          }, {\n            test  : /\\.eot(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'file',\n          }, {\n            test  : /\\.cur(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'file',\n          }, {\n            test  : /\\.svg(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=image/svg+xml',\n          },\n          {\n            test  : /\\.coffee$/,\n            loader: 'coffee',\n          },\n          {\n            test  : /\\.(png|gif|jpe?g)$/,\n            loader: 'url?limit=8096',\n          },\n          {\n            // https://github.com/webpack/webpack/issues/512\n            test  : /[\\\\/](bower_components)[\\\\/]modernizr[\\\\/]modernizr\\.js$/,\n            loader: 'imports?this=>window!exports?window.Modernizr',\n          },\n          {\n            test  : /[\\\\/](bower_components)[\\\\/]svgeezy[\\\\/]svgeezy\\.js$/,\n            loader: 'imports?this=>window!exports?svgeezy',\n          },\n          {\n            // https://www.techchorus.net/blog/using-sass-version-of-bootstrap-with-webpack/\n            test  : /[\\\\/](bower_components)[\\\\/]bootstrap-sass[\\\\/]assets[\\\\/]javascripts[\\\\/]/,\n            loader: 'imports?jQuery=jquery,$=jquery,this=>window',\n          },\n          {\n            test  : /[\\\\/]jquery\\..*\\.js$/,\n            loader: 'imports?jQuery=jquery,$=jquery,this=>window',\n          },\n        ]\n\n        if (runtime.isDev) {\n          loaders.push({\n            test  : /\\.css$/,\n            loader: `style!css?sourceMap!resolve-url?root=${runtime.projectDir}`,\n          })\n          loaders.push({\n            test  : /\\.scss$/,\n            loader: `style!css?sourceMap!sass?sourceMap!resolve-url?root=${runtime.projectDir}`,\n          })\n          loaders.push({\n            test  : /\\.less$/,\n            // @todo Had to disable resolve-url-loader for less as less currently produces invalid css (in its eyes)\n            // see: https://travis-ci.org/tus/tus.io/builds/183913229#L1206\n            loader: 'style!css?sourceMap!less?sourceMap',\n          })\n          loaders.push({\n            test  : /\\.(js|jsx)$/,\n            loader: 'babel',\n            query : {\n              babelrc: false,\n              // If we ever want multiple loaders on this test: https://github.com/babel/babel-loader/issues/166#issuecomment-170054444\n              presets: [\n                require.resolve('babel-preset-es2015'),\n                require.resolve('babel-preset-react'),\n                require.resolve('babel-preset-stage-0'),\n              ],\n              sourceRoot    : `${runtime.projectDir}`,\n              cacheDirectory: `${runtime.cacheDir}/babelCache`,\n            },\n            exclude: /[\\\\/](node_modules|bower_components|js-untouched)[\\\\/]/,\n          })\n        } else {\n          loaders.push({\n            test  : /\\.css$/,\n            loader: ExtractTextPlugin.extract(`css?sourceMap!resolve-url?root=${runtime.projectDir}`),\n          })\n          loaders.push({\n            test  : /\\.scss$/,\n            loader: ExtractTextPlugin.extract(`css?sourceMap!sass?sourceMap!resolve-url?root=${runtime.projectDir}`),\n          })\n          loaders.push({\n            test  : /\\.less$/,\n            // @todo Had to disable resolve-url-loader for less as less currently produces invalid css (in its eyes)\n            // see: https://travis-ci.org/tus/tus.io/builds/183913229#L1206\n            loader: ExtractTextPlugin.extract('css?sourceMap!less?sourceMap'),\n          })\n          loaders.push({\n            test  : /\\.(js|jsx)$/,\n            loader: 'babel',\n            query : {\n              babelrc: false,\n              // If we ever want multiple loaders on this test: https://github.com/babel/babel-loader/issues/166#issuecomment-170054444\n              presets: [\n                require.resolve('babel-preset-es2015'),\n                require.resolve('babel-preset-react'),\n                require.resolve('babel-preset-stage-0'),\n              ],\n              sourceRoot    : `${runtime.projectDir}`,\n              cacheDirectory: `${runtime.cacheDir}/babelCache`,\n            },\n            exclude: /[\\\\/](node_modules|bower_components|js-untouched)[\\\\/]/,\n          })\n        }\n\n        return loaders\n      }()),\n    },\n    plugins: (function plugins () {\n      var plugins = [\n        new BowerWebpackPlugin(),\n        new webpack.ProvidePlugin({\n          _     : 'lodash',\n          $     : 'jquery',\n          jQuery: 'jquery',\n        }),\n        new SvgStoreWebpackPlugin({\n          svgoOptions: {\n            plugins: [\n             { removeTitle: true },\n            ],\n          },\n          prefix: 'icon-',\n        }),\n      ]\n\n      if (runtime.isDev) {\n        plugins.push(new webpack.HotModuleReplacementPlugin())\n      } else {\n        plugins.push(new ExtractTextPlugin(getFilename('css'), {\n          allChunks: true,\n        }))\n        plugins.push(new webpack.optimize.UglifyJsPlugin({\n          compress: {\n            warnings: true,\n          },\n          mangle   : true,\n          sourceMap: true,\n          exclude  : /[\\\\/](node_modules|bower_components|js-untouched)[\\\\/]/,\n        }))\n\n        // plugins.push(new webpack.NoErrorsPlugin())\n        plugins.push(new OptimizeCssAssetsPlugin())\n        plugins.push(new webpack.optimize.OccurrenceOrderPlugin())\n        plugins.push(new webpack.optimize.DedupePlugin())\n        plugins.push(new webpack.optimize.LimitChunkCountPlugin({maxChunks: 15}))\n        plugins.push(new webpack.optimize.MinChunkSizePlugin({minChunkSize: 10000}))\n        plugins.push(function ReportErrors () {\n          this.plugin('done', ({compilation}) => {\n            for (const asset in compilation.assets) {\n              console.log(`--> Wrote ${runtime.assetsBuildDir}/${asset}`)\n            }\n            if (compilation.errors && compilation.errors.length) {\n              console.error(compilation.errors)\n              if (!runtime.isDev) {\n                process.exit(1)\n              }\n            }\n          })\n        })\n      }\n\n      if (runtime.common) {\n        plugins.push(new webpack.optimize.CommonsChunkPlugin(/* chunkName= */'common', /* filename= */getFilename('js')))\n      }\n\n      if (runtime.statistics) {\n        const fullpathStatistics = `${runtime.assetsBuildDir}/${runtime.statistics}`\n        if (runtime.isDev) {\n          console.log(`--> Cannot write statistics to \"${fullpathStatistics}\" in dev mode. Create a production build via LANYON_ENV=production. `)\n        } else {\n          // @todo: Once Vizualizer supports multiple entries, add support for that here\n          // https://github.com/chrisbateman/webpack-visualizer/issues/5\n          // Currently it just shows stats for all entries in one graph\n          plugins.push(new Visualizer({\n            filename: runtime.statistics,\n          }))\n        }\n      }\n\n      plugins.push(new AssetsPlugin({\n        filename: 'jekyll.lanyon_assets.yml',\n        path    : runtime.cacheDir,\n        processOutput (assets) {\n          console.log(`--> Writing asset manifest to: \"${runtime.cacheDir}/jekyll.lanyon_assets.yml\"`)\n          return yaml.safeDump({lanyon_assets: assets})\n        },\n      }))\n      plugins.push(new WebpackMd5Hash())\n      plugins.push(new webpack.optimize.OccurenceOrderPlugin())\n\n      return plugins\n    }()),\n    resolveLoader: {\n      root: [\n        path.join(runtime.lanyonDir, 'node_modules'),\n        path.join(runtime.projectDir, 'node_modules'),\n      ],\n    },\n    recordsPath: runtime.recordsPath,\n    resolve    : {\n      root: [\n        path.resolve(runtime.assetsSourceDir),\n        `${path.resolve(runtime.assetsSourceDir)}/bower_components`,\n        `${path.resolve(runtime.projectDir)}/node_modules`,\n        `${path.resolve(runtime.lanyonDir)}/node_modules`,\n      ],\n    },\n    debug: runtime.isDev,\n  },\n}\n\nif (runtime.isHotLoading) {\n  var bundler = webpack(cfg.webpack)\n}\n\ncfg.browsersync = {\n  server: {\n    port      : runtime.ports.content,\n    baseDir   : runtime.contentBuildDir,\n    middleware: (function middlewares () {\n      var middlewares = []\n\n      if (runtime.isHotLoading) {\n        middlewares.push(webpackDevMiddleware(bundler, {\n          publicPath: runtime.publicPath,\n          hot       : true,\n          inline    : true,\n          stats     : { colors: true },\n        }))\n        middlewares.push(webpackHotMiddleware(bundler))\n      }\n\n      if (!middlewares.length) {\n        return false\n      }\n\n      return middlewares\n    }()),\n    // serveStatic: runtime.themeDir\n  },\n  watchOptions: {\n    ignoreInitial: true,\n    ignored      : [\n      // no need to watch '*.js' here, webpack will take care of it for us,\n      // including full page reloads if HMR won't work\n      '*.js',\n      '.git',\n      'assets/build',\n      '.lanyon',\n    ],\n  },\n  reloadDelay: 200,\n  files      : runtime.contentBuildDir,\n}\n\ncfg.jekyll = {\n  exclude: [\n    'node_modules',\n    'env.sh',\n    'env.*.sh',\n    '.env.sh',\n    '.env.*.sh',\n    '.lanyon',\n  ],\n}\n\ncfg.nodemon = {\n  onChangeOnly: true,\n  verbose     : true,\n  watch       : runtime.contentScandir,\n  ignore      : [\n    '_site/**',\n    '.env.*.sh',\n    '.env.sh',\n    '.lanyon/**',\n    'assets/**',\n    'env.*.sh',\n    'env.sh',\n    'node_modules/**',\n    'vendor/**',\n  ].concat(runtime.contentIgnore),\n  ext: [\n    'htm',\n    'html',\n    'jpg',\n    'json',\n    'md',\n    'png',\n    'sh',\n    'yml',\n  ].join(','),\n}\n\ncfg.runtime = runtime\n\nmodule.exports = cfg\n"]}