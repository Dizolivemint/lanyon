{"version":3,"sources":["../src/config.js"],"names":["_","require","path","utils","shell","fs","ExtractTextPlugin","webpack","webpackDevMiddleware","webpackHotMiddleware","BowerWebpackPlugin","SvgStoreWebpackPlugin","OptimizeCssAssetsPlugin","Visualizer","yaml","AssetsPlugin","WebpackMd5Hash","scrolex","persistOpts","announce","addCommandAsComponent","components","main","module","failure","process","argv","exit","runtime","lanyonDir","join","__dirname","lanyonEnv","env","LANYON_ENV","lanyonPackageFile","lanyonPackage","lanyonVersion","version","trace","LANYON_TRACE","publicPath","rubyProvidersOnly","LANYON_ONLY","rubyProvidersSkip","LANYON_SKIP","split","lanyonUpdateGemLockfile","LANYON_UPDATE_GEM_LOCKFILE","lanyonReset","LANYON_RESET","onTravis","TRAVIS","ghPagesEnv","GHPAGES_URL","GHPAGES_BOTNAME","GHPAGES_BOTEMAIL","isDev","isHotLoading","indexOf","projectDir","LANYON_PROJECT","PWD","cwd","npmRoot","upwardDirContaining","gitRoot","projectPackageFile","projectPackage","e","gems","defaults","get","lanyon","realpathSync","cacheDir","binDir","recordsPath","assetsSourceDir","assetsBuildDir","contentBuildDir","contentScandir","contentIgnore","jekyllConfig","jekyllConfigPath","buf","readFileSync","safeLoad","themeDir","theme","cmd","z","exec","stdout","allApps","forEach","app","push","getFilename","extension","isChunk","isContent","filename","cfg","entry","entries","unshift","common","node","target","output","chunkFilename","cssFilename","devtool","bail","loaders","plugins","test","loader","query","babelrc","presets","resolve","sourceRoot","cacheDirectory","exclude","extract","ProvidePlugin","$","jQuery","svgoOptions","removeTitle","prefix","HotModuleReplacementPlugin","allChunks","optimize","UglifyJsPlugin","compress","warnings","mangle","sourceMap","OccurrenceOrderPlugin","DedupePlugin","LimitChunkCountPlugin","maxChunks","MinChunkSizePlugin","minChunkSize","ReportErrors","plugin","compilation","asset","assets","stick","errors","length","CommonsChunkPlugin","statistics","processOutput","safeDump","lanyon_assets","OccurenceOrderPlugin","resolveLoader","root","debug","bundler","browsersync","server","port","ports","content","baseDir","middleware","middlewares","hot","inline","stats","colors","watchOptions","ignoreInitial","ignored","reloadDelay","files","jekyll","nodemon","onChangeOnly","verbose","watch","ignore","concat","ext","exports"],"mappings":"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","file":"config.js","sourcesContent":["const _                       = require('lodash')\nconst path                    = require('path')\nconst utils                   = require('./utils')\nconst shell                   = require('shelljs')\nconst fs                      = require('fs')\nconst ExtractTextPlugin       = require('extract-text-webpack-plugin')\nconst webpack                 = require('webpack')\nconst webpackDevMiddleware    = require('webpack-dev-middleware')\nconst webpackHotMiddleware    = require('webpack-hot-middleware')\nconst BowerWebpackPlugin      = require('bower-webpack-plugin')\nconst SvgStoreWebpackPlugin   = require('webpack-svgstore-plugin')\nconst OptimizeCssAssetsPlugin = require('optimize-css-assets-webpack-plugin')\nconst Visualizer              = require('webpack-visualizer-plugin')\nconst yaml                    = require('js-yaml')\nconst AssetsPlugin            = require('assets-webpack-plugin')\nconst WebpackMd5Hash          = require('webpack-md5-hash')\nconst scrolex                 = require('scrolex').persistOpts({\n  announce             : true,\n  addCommandAsComponent: true,\n  components           : `lanyon>config`,\n})\n\nif (require.main === module) {\n  scrolex.failure(`Please only used this module via require, or: src/cli.js ${process.argv[1]}`)\n  process.exit(1)\n}\n\nlet runtime = {}\n\nruntime.lanyonDir         = path.join(__dirname, '..')\nruntime.lanyonEnv         = process.env.LANYON_ENV || 'development'\nruntime.lanyonPackageFile = path.join(runtime.lanyonDir, 'package.json')\nconst lanyonPackage       = require(runtime.lanyonPackageFile)\nruntime.lanyonVersion     = lanyonPackage.version\n\nruntime.trace      = process.env.LANYON_TRACE === '1'\nruntime.publicPath = '/assets/build/'\n\nruntime.rubyProvidersOnly = (process.env.LANYON_ONLY || '')\nruntime.rubyProvidersSkip = (process.env.LANYON_SKIP || '').split(/\\s+/)\n\nruntime.lanyonUpdateGemLockfile = process.env.LANYON_UPDATE_GEM_LOCKFILE === '1'\nruntime.lanyonReset             = process.env.LANYON_RESET               === '1'\nruntime.onTravis                = process.env.TRAVIS                     === 'true'\nruntime.ghPagesEnv              = {\n  GHPAGES_URL     : process.env.GHPAGES_URL,\n  GHPAGES_BOTNAME : process.env.GHPAGES_BOTNAME,\n  GHPAGES_BOTEMAIL: process.env.GHPAGES_BOTEMAIL,\n}\nruntime.isDev        = runtime.lanyonEnv === 'development'\nruntime.isHotLoading = runtime.isDev && ['serve', 'start'].indexOf(process.argv[2]) !== -1\n\nruntime.projectDir = process.env.LANYON_PROJECT || process.env.PWD || process.cwd() // <-- symlinked npm will mess up process.cwd() and point to ~/code/lanyon\n\nruntime.npmRoot = utils.upwardDirContaining('package.json', runtime.projectDir, 'lanyon')\nif (!runtime.npmRoot) {\n  scrolex.failure(`Unable to determine non-lanyon npmRoot, falling back to ${runtime.projectDir}`)\n  runtime.npmRoot = runtime.projectDir\n}\nruntime.gitRoot = utils.upwardDirContaining('.git', runtime.npmRoot)\n\nruntime.projectPackageFile = path.join(runtime.npmRoot, 'package.json')\ntry {\n  var projectPackage = require(runtime.projectPackageFile)\n} catch (e) {\n  projectPackage = {}\n}\n\nruntime.gems = _.defaults(_.get(projectPackage, 'lanyon.gems') || {}, _.get(lanyonPackage, 'lanyon.gems'))\nruntime      = _.defaults(projectPackage.lanyon || {}, lanyonPackage.lanyon, runtime)\n\ntry {\n  runtime.projectDir = fs.realpathSync(runtime.projectDir)\n} catch (e) {\n  runtime.projectDir = fs.realpathSync(`${runtime.gitRoot}/${runtime.projectDir}`)\n}\n\nruntime.cacheDir        = path.join(runtime.projectDir, '.lanyon')\nruntime.binDir          = path.join(runtime.cacheDir, 'bin')\nruntime.recordsPath     = path.join(runtime.cacheDir, 'records.json')\nruntime.assetsSourceDir = path.join(runtime.projectDir, 'assets')\nruntime.assetsBuildDir  = path.join(runtime.assetsSourceDir, 'build')\nruntime.contentBuildDir = path.join(runtime.projectDir, '_site')\nruntime.contentScandir  = path.join(runtime.projectDir, runtime.contentScandir || '.')\nruntime.contentIgnore   = runtime.contentIgnore || []\n\n// Load project's jekyll _config.yml\nruntime.jekyllConfig   = {}\nconst jekyllConfigPath = path.join(runtime.projectDir, '_config.yml')\ntry {\n  const buf            = fs.readFileSync(jekyllConfigPath)\n  runtime.jekyllConfig = yaml.safeLoad(buf)\n} catch (e) {\n  scrolex.failure(`Unable to load ${jekyllConfigPath}`)\n}\n\nruntime.themeDir = false\nif (runtime.jekyllConfig.theme) {\n  const cmd = `${path.join(runtime.binDir, 'bundler')} show ${runtime.jekyllConfig.theme}`\n  const z   = shell.exec(cmd).stdout\n  if (!z) {\n    scrolex.failure(`Unable find defined them \"${runtime.jekyllConfig.theme}\" via cmd: \"${cmd}\"`)\n  } else {\n    runtime.themeDir = z\n  }\n}\n\n// Determine rubyProvider sources to traverse\nconst allApps = [ 'system', 'docker', 'rbenv', 'rvm', 'ruby-shim' ]\nif (runtime.rubyProvidersOnly === 'auto-all') {\n  runtime.rubyProvidersOnly = ''\n}\n\nif (runtime.rubyProvidersOnly) {\n  runtime.rubyProvidersSkip = []\n  allApps.forEach(app => {\n    if (app !== runtime.rubyProvidersOnly) {\n      runtime.rubyProvidersSkip.push(app)\n    }\n  })\n}\n\nfunction getFilename (extension, isChunk, isContent) {\n  let filename = `[name].${extension}`\n\n  if (!runtime.isDev) {\n    filename = `[name].[chunkhash].${extension}`\n    if (isContent) {\n      filename = `[name].[contenthash].${extension}`\n    }\n  }\n\n  if (isChunk) {\n    filename = `[name].[chunkhash].[id].chunk.${extension}`\n  }\n\n  return filename\n}\n\nconst cfg = {\n  webpack: {\n    entry: (function entries () {\n      var entries = {}\n      runtime.entries.forEach(entry => {\n        entries[entry] = [ path.join(runtime.assetsSourceDir, `${entry}.js`) ]\n\n        if (entry === 'app' && runtime.isDev) {\n          entries[entry].unshift('webpack-hot-middleware/client')\n        }\n      })\n\n      if (runtime.common) {\n        // e.g.: [ \"jquery\" ]\n        // https://webpack.github.io/docs/code-splitting.html#split-app-and-vendor-code\n        entries.common = runtime.common\n      }\n\n      return entries\n    }()),\n    node: {\n      fs: 'empty',\n    },\n    target: 'web',\n    output: {\n      publicPath   : runtime.publicPath,\n      path         : runtime.assetsBuildDir,\n      filename     : getFilename('js'),\n      chunkFilename: getFilename('js', true),\n      cssFilename  : getFilename('css'),\n    },\n    devtool: 'eval-cheap-source-map',\n    // devtool: 'source-map',\n    bail   : false, // <-- We use our own ReportErrors plugin as with bail errors details are lost. e.g.: `Error at NormalModule.onModuleBuildFailed`\n    module : {\n      loaders: (function plugins () {\n        const loaders = [\n          {\n            test  : /\\.woff(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=application/font-woff',\n          }, {\n            test  : /\\.woff2(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=application/font-woff',\n          }, {\n            test  : /\\.ttf(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=application/octet-stream',\n          }, {\n            test  : /\\.eot(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'file',\n          }, {\n            test  : /\\.cur(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'file',\n          }, {\n            test  : /\\.svg(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\n            loader: 'url?limit=10000&mimetype=image/svg+xml',\n          },\n          {\n            test  : /\\.coffee$/,\n            loader: 'coffee',\n          },\n          {\n            test  : /\\.(png|gif|jpe?g)$/,\n            loader: 'url?limit=8096',\n          },\n          {\n            // https://github.com/webpack/webpack/issues/512\n            test  : /[\\\\/](bower_components)[\\\\/]modernizr[\\\\/]modernizr\\.js$/,\n            loader: 'imports?this=>window!exports?window.Modernizr',\n          },\n          {\n            test  : /[\\\\/](bower_components)[\\\\/]svgeezy[\\\\/]svgeezy\\.js$/,\n            loader: 'imports?this=>window!exports?svgeezy',\n          },\n          {\n            // https://www.techchorus.net/blog/using-sass-version-of-bootstrap-with-webpack/\n            test  : /[\\\\/](bower_components)[\\\\/]bootstrap-sass[\\\\/]assets[\\\\/]javascripts[\\\\/]/,\n            loader: 'imports?jQuery=jquery,$=jquery,this=>window',\n          },\n          {\n            test  : /[\\\\/]jquery\\..*\\.js$/,\n            loader: 'imports?jQuery=jquery,$=jquery,this=>window',\n          },\n        ]\n\n        if (runtime.isDev) {\n          loaders.push({\n            test  : /\\.css$/,\n            loader: `style!css?sourceMap!resolve-url?root=${runtime.projectDir}`,\n          })\n          loaders.push({\n            test  : /\\.scss$/,\n            loader: `style!css?sourceMap!sass?sourceMap!resolve-url?root=${runtime.projectDir}`,\n          })\n          loaders.push({\n            test  : /\\.less$/,\n            // @todo Had to disable resolve-url-loader for less as less currently produces invalid css (in its eyes)\n            // see: https://travis-ci.org/tus/tus.io/builds/183913229#L1206\n            loader: 'style!css?sourceMap!less?sourceMap',\n          })\n          loaders.push({\n            test  : /\\.(js|jsx)$/,\n            loader: 'babel',\n            query : {\n              babelrc: false,\n              // If we ever want multiple loaders on this test: https://github.com/babel/babel-loader/issues/166#issuecomment-170054444\n              presets: [\n                require.resolve('babel-preset-es2015'),\n                require.resolve('babel-preset-react'),\n                require.resolve('babel-preset-stage-0'),\n              ],\n              sourceRoot    : `${runtime.projectDir}`,\n              cacheDirectory: `${runtime.cacheDir}/babelCache`,\n            },\n            exclude: /[\\\\/](node_modules|bower_components|js-untouched)[\\\\/]/,\n          })\n        } else {\n          loaders.push({\n            test  : /\\.css$/,\n            loader: ExtractTextPlugin.extract(`css?sourceMap!resolve-url?root=${runtime.projectDir}`),\n          })\n          loaders.push({\n            test  : /\\.scss$/,\n            loader: ExtractTextPlugin.extract(`css?sourceMap!sass?sourceMap!resolve-url?root=${runtime.projectDir}`),\n          })\n          loaders.push({\n            test  : /\\.less$/,\n            // @todo Had to disable resolve-url-loader for less as less currently produces invalid css (in its eyes)\n            // see: https://travis-ci.org/tus/tus.io/builds/183913229#L1206\n            loader: ExtractTextPlugin.extract('css?sourceMap!less?sourceMap'),\n          })\n          loaders.push({\n            test  : /\\.(js|jsx)$/,\n            loader: 'babel',\n            query : {\n              babelrc: false,\n              // If we ever want multiple loaders on this test: https://github.com/babel/babel-loader/issues/166#issuecomment-170054444\n              presets: [\n                require.resolve('babel-preset-es2015'),\n                require.resolve('babel-preset-react'),\n                require.resolve('babel-preset-stage-0'),\n              ],\n              sourceRoot    : `${runtime.projectDir}`,\n              cacheDirectory: `${runtime.cacheDir}/babelCache`,\n            },\n            exclude: /[\\\\/](node_modules|bower_components|js-untouched)[\\\\/]/,\n          })\n        }\n\n        return loaders\n      }()),\n    },\n    plugins: (function plugins () {\n      var plugins = [\n        new BowerWebpackPlugin(),\n        new webpack.ProvidePlugin({\n          _     : 'lodash',\n          $     : 'jquery',\n          jQuery: 'jquery',\n        }),\n        new SvgStoreWebpackPlugin({\n          svgoOptions: {\n            plugins: [\n             { removeTitle: true },\n            ],\n          },\n          prefix: 'icon-',\n        }),\n      ]\n\n      if (runtime.isDev) {\n        plugins.push(new webpack.HotModuleReplacementPlugin())\n      } else {\n        plugins.push(new ExtractTextPlugin(getFilename('css'), {\n          allChunks: true,\n        }))\n        plugins.push(new webpack.optimize.UglifyJsPlugin({\n          compress: {\n            warnings: true,\n          },\n          mangle   : true,\n          sourceMap: true,\n          exclude  : /[\\\\/](node_modules|bower_components|js-untouched)[\\\\/]/,\n        }))\n\n        // plugins.push(new webpack.NoErrorsPlugin())\n        plugins.push(new OptimizeCssAssetsPlugin())\n        plugins.push(new webpack.optimize.OccurrenceOrderPlugin())\n        plugins.push(new webpack.optimize.DedupePlugin())\n        plugins.push(new webpack.optimize.LimitChunkCountPlugin({maxChunks: 15}))\n        plugins.push(new webpack.optimize.MinChunkSizePlugin({minChunkSize: 10000}))\n        plugins.push(function ReportErrors () {\n          this.plugin('done', ({compilation}) => {\n            for (const asset in compilation.assets) {\n              scrolex.stick(`Wrote ${runtime.assetsBuildDir}/${asset}`)\n            }\n            if (compilation.errors && compilation.errors.length) {\n              scrolex.failure(compilation.errors)\n              if (!runtime.isDev) {\n                process.exit(1)\n              }\n            }\n          })\n        })\n      }\n\n      if (runtime.common) {\n        plugins.push(new webpack.optimize.CommonsChunkPlugin(/* chunkName= */'common', /* filename= */getFilename('js')))\n      }\n\n      if (!runtime.isDev && runtime.statistics) {\n        // @todo: Once Vizualizer supports multiple entries, add support for that here\n        // https://github.com/chrisbateman/webpack-visualizer/issues/5\n        // Currently it just shows stats for all entries in one graph\n        plugins.push(new Visualizer({\n          filename: runtime.statistics,\n        }))\n      }\n\n      plugins.push(new AssetsPlugin({\n        filename: 'jekyll.lanyon_assets.yml',\n        path    : runtime.cacheDir,\n        processOutput (assets) {\n          scrolex.stick(`Writing asset manifest to: \"${runtime.cacheDir}/jekyll.lanyon_assets.yml\"`)\n          return yaml.safeDump({lanyon_assets: assets})\n        },\n      }))\n      plugins.push(new WebpackMd5Hash())\n      plugins.push(new webpack.optimize.OccurenceOrderPlugin())\n\n      return plugins\n    }()),\n    resolveLoader: {\n      root: [\n        path.join(runtime.lanyonDir, 'node_modules'),\n        path.join(runtime.projectDir, 'node_modules'),\n      ],\n    },\n    recordsPath: runtime.recordsPath,\n    resolve    : {\n      root: [\n        path.resolve(runtime.assetsSourceDir),\n        `${path.resolve(runtime.assetsSourceDir)}/bower_components`,\n        `${path.resolve(runtime.projectDir)}/node_modules`,\n        `${path.resolve(runtime.lanyonDir)}/node_modules`,\n      ],\n    },\n    debug: runtime.isDev,\n  },\n}\n\nif (runtime.isHotLoading) {\n  var bundler = webpack(cfg.webpack)\n}\n\ncfg.browsersync = {\n  server: {\n    port      : runtime.ports.content,\n    baseDir   : runtime.contentBuildDir,\n    middleware: (function middlewares () {\n      var middlewares = []\n\n      if (runtime.isHotLoading) {\n        middlewares.push(webpackDevMiddleware(bundler, {\n          publicPath: runtime.publicPath,\n          hot       : true,\n          inline    : true,\n          stats     : { colors: true },\n        }))\n        middlewares.push(webpackHotMiddleware(bundler))\n      }\n\n      if (!middlewares.length) {\n        return false\n      }\n\n      return middlewares\n    }()),\n    // serveStatic: runtime.themeDir\n  },\n  watchOptions: {\n    ignoreInitial: true,\n    ignored      : [\n      // no need to watch '*.js' here, webpack will take care of it for us,\n      // including full page reloads if HMR won't work\n      '*.js',\n      '.git',\n      'assets/build',\n      '.lanyon',\n    ],\n  },\n  reloadDelay: 200,\n  files      : runtime.contentBuildDir,\n}\n\ncfg.jekyll = {\n  exclude: [\n    'node_modules',\n    'env.sh',\n    'env.*.sh',\n    '.env.sh',\n    '.env.*.sh',\n    '.lanyon',\n  ],\n}\n\ncfg.nodemon = {\n  onChangeOnly: true,\n  verbose     : true,\n  watch       : runtime.contentScandir,\n  ignore      : [\n    '_site/**',\n    '.env.*.sh',\n    '.env.sh',\n    '.lanyon/**',\n    'assets/**',\n    'env.*.sh',\n    'env.sh',\n    'node_modules/**',\n    'vendor/**',\n  ].concat(runtime.contentIgnore),\n  ext: [\n    'htm',\n    'html',\n    'jpg',\n    'json',\n    'md',\n    'png',\n    'sh',\n    'yml',\n  ].join(','),\n}\n\ncfg.runtime = runtime\n\nmodule.exports = cfg\n"]}