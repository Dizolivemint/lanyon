{"version":3,"sources":["../src/encrypt.js"],"names":["Scrolex","require","module","exports","runtime","cb","exe","cwd","gitRoot","components","ghPagesEnv","GHPAGES_URL","Error","key"],"mappings":";;AAAA;AACA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;;AAEAC,OAAOC,OAAP,GAAiB,UAACC,OAAD,EAAUC,EAAV,EAAiB;AAChCL,UAAQM,GAAR,CAAY,0EAAZ,EAAwF,EAAEC,KAAKH,QAAQI,OAAf,EAAwBC,YAAY,gBAApC,EAAxF;;AAEA,MAAI,CAACL,QAAQM,UAAR,CAAmBC,WAAxB,EAAqC;AACnC,WAAON,GAAG,IAAIO,KAAJ,CAAU,uDAAV,CAAH,CAAP;AACD;;AAED,OAAK,IAAMC,GAAX,IAAkBT,QAAQM,UAA1B,EAAsC;AACpC,QAAIN,QAAQM,UAAR,CAAmBG,GAAnB,CAAJ,EAA6B;AAC3Bb,cAAQM,GAAR,2DAAoEO,GAApE,UAA4EA,GAA5E,EAAmF,EAAEN,KAAKH,QAAQI,OAAf,EAAwBC,YAAY,gBAApC,EAAnF;AACD;AACF;;AAEDJ,KAAG,IAAH;AACD,CAdD","file":"encrypt.js","sourcesContent":["// const utils = require('./utils')\nconst Scrolex = require('scrolex')\n\nmodule.exports = (runtime, cb) => {\n  Scrolex.exe('[ -f env.sh ] || (touch env.sh && chmod 600 env.sh && git ignore env.sh)', { cwd: runtime.gitRoot, components: 'lanyon>encrypt' })\n\n  if (!runtime.ghPagesEnv.GHPAGES_URL) {\n    return cb(new Error('GHPAGES_URL was not set. Did you source env.sh first?'))\n  }\n\n  for (const key in runtime.ghPagesEnv) {\n    if (runtime.ghPagesEnv[key]) {\n      Scrolex.exe(`travis encrypt --skip-version-check --add env.global ${key}=$${key}`, { cwd: runtime.gitRoot, components: 'lanyon>encrypt' })\n    }\n  }\n\n  cb(null)\n}\n"]}